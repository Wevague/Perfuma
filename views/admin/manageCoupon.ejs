
 <%- include("../../views/partials/admin/header") %>
 
 <style>
    .content-header {
        padding: 15px 0.5rem;
    }
    .content-header h1 {
        font-size: 1.8rem;
        margin: 0;
    }
    .btn-primary {
        background-color: #009688;
        border-color: #009688;
        margin-left: 30rem;
        margin-top: 10px;
    }
    .btn-primary:hover {
        background-color: #00796b;
        border-color: #00796b;
    }
    .form-control {
        height: calc(2.25rem + 2px);
        padding: .375rem .75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
    .card {
        box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);
        margin-bottom: 1rem;
    }
    .table {
        margin-bottom: 0;
    }
    .table th {
        border-top: 0;
        background-color: #f8f9fa;
        font-weight: 500;
    }
    .badge-success {
        color: #fff;
        background-color: #28a745;
    }
    .btn-danger {
        color: #fff;
        background-color: #dc3545;
        border-color: #dc3545;
    }
    .btn-sm {
        padding: .25rem .5rem;
        font-size: .875rem;
        line-height: 1.5;
        border-radius: .2rem;
    }
</style>

 <div class="content-header">
     <div class="container-fluid">
         <div class="row mb-2">
             <div class="col-sm-6">
                 <h1 class="m-0">Coupon Management</h1>
             </div>
             <div class="col-sm-6 text-right">
                 <a href="/admin/addcoupon" class="btn btn-primary">Add New Coupon</a>
             </div>
         </div>
     </div>
 </div>
 
 <section class="content">
     <div class="container-fluid">
         <div class="row mb-3">
             <div class="col-md-4">
                 <input type="text" class="form-control" placeholder="Search...">
             </div>
             <div class="col-md-8 text-right">
                 <select class="form-control d-inline-block w-auto mr-2">
                     <option>Status</option>
                     <option>Active</option>
                     <option>Inactive</option>
                 </select>
                 <select class="form-control d-inline-block w-auto">
                     <option>Show 20</option>
                     <option>Show 50</option>
                     <option>Show 100</option>
                 </select>
             </div>
         </div>
         <div class="card">
             <div class="card-body p-0">
                 <table class="table table-striped">
                     <thead>
                         <tr>
                             <th>#ID</th>
                             <th>Coupon Name</th>
                             <th>Description</th>
                             <th>Coupon Code</th>
                             <th>Coupon Discount</th>
                             <th>Max Discount</th>
                             <th>Min Purchase Amount</th>
                             <th>Action</th>
                         </tr>
                     </thead>
                     <tbody>

                         <tr>
                            <% coupons.forEach(coupon => { %>
                                <tr>
                                    <td><%= coupon._id %></td>
                                    <td><%= coupon.name %></td>
                                    <td><%= coupon.description %></td>
                                    <td><%= coupon.code %></td>
                                    <td><%= coupon.discountPercentage %>%</td>
                                    <td><%= coupon.maxDiscount %></td>
                                    <td><%= coupon.minAmount %></td>
                                    <td>
                                        <!-- <button class="btn btn-danger btn-sm delete-btn" data-coupon-id="<%= coupon._id %>">Delete</button> -->
                                    
                                        <a href="/admin/deleteCoupon?couponId=<%= coupon._id %>"  class="btn btn-danger btn-sm delete-btn">Delete</a>
                                    </td>
                                    
                                </tr>
                                
                            <% }); %>
                         </tr>
                        
                     </tbody>
                 </table>
             </div>
         </div>
     </div>
 </section>

 <script>
    // document.querySelectorAll('.delete-btn').forEach(button => {
    //     button.addEventListener('click', async (event) => {
    //         const couponId = event.target.getAttribute('data-coupon-id');

    //         console.log("couponId",couponId);
            
            
    //         // const confirmation = confirm('Are you sure you want to delete this coupon?');
    //         // if (!confirmation) return; 

    //         try {
    //             const response = await fetch(`/deleteCoupon/${couponId}`, {
    //             method: 'DELETE',
    //             headers: {
    //             'Content-Type': 'application/json',
    //                     },
    //                 });

    //             if (response.ok) {
    //                 event.target.closest('tr').remove(); 
    //                 alert('Coupon deleted successfully!');
    //             } else {
    //                 alert('Failed to delete coupon. Please try again.');
    //             }
    //         } catch (error) {
    //             console.error('Error deleting coupon:', error);
    //             alert('An error occurred. Please try again later.');
    //         }
    //     });
    // });
</script>

 
 
 
 
 <%- include("../../views/partials/admin/footer") %>